name = "dubbing-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"
# ให้ Worker รันงานหนักได้ (pipeline ใช้เวลา 2-3 นาที)
[limits]
cpu_ms = 300000

[[d1_databases]]
binding = "DB"
database_name = "dubbing-db"
database_id = "af814a17-2bf8-46f7-a73a-7a52c4830822"

[[r2_buckets]]
binding = "BUCKET"
bucket_name = "dubbing-videos"

[vars]
CORS_ORIGIN = "*"
R2_PUBLIC_URL = "https://pub-a706e0103203445680507a4f55084d86.r2.dev"
XHS_DL_URL = "https://xhs-dl.lslly.com"
CAPROVER_MERGE_URL = "https://dubbing-api.lslly.com"
GEMINI_MODEL = "gemini-3-flash-preview"

# Secrets (set via `wrangler secret put`):
# GOOGLE_API_KEY
# TELEGRAM_BOT_TOKEN

# Cron trigger for auto-posting to Facebook Reels
[triggers]
crons = ["*/5 * * * *"]
